# Структура проекта

React приложение образуется иерархией компонентов с разным назначением. 
Одни компоненты отображают данные, другие управляют потоком данных, связыванием событий с конкретной бизнес логикой, определяют страницы приложения. 
Кроме компонент имеется состояние приложения в виде структуры данных и действий над ними, сервисы получения/сохранения этих данных, вспомогательные утилиты и другие функции. Для упорядочивания многообразия функций определена соответствующая структура.

```
├──/dist — сборки приложения после `npm run build` 
├──/src 
|    ├──/api — функции вызова rest api
|    |   ├──/common 
|    |   ├──/users
|    |   └──index.js — экземпляры axios библиотеки и функций апи
|    ├──/app  — страницы и разделы приложения, роутинг
|    |   ├──/home 
|    |   ├──/catalog
|    |   ├── index.js — корневой контейнер App
|    |   └── navigation.js — объект для навигации (history)
|    ├──/components — повторно используемые глупые компоненты
|    |   ├──/elements 
|    |   ├──/layouts
|    |   └──/menus
|    ├──/containers — повторно используемые фрагменты приложения - умные компоненты
|    |   ├──/article-list 
|    |   └──/main-menu
|    ├──/store — модули состояния на redux
|    |   ├──/articles
|    |   |   ├── state.js
|    |   |   ├── actions.js 
|    |   |   └── reducer.js
|    |   ├──/session 
|    |   |   └──...
|    |   ├──index.js — объект хранилища
|    |   └──reducers.js — реэкспорт редьюсеров из всех модулей состояний
|    ├──/theme — общие файлы стилей
|    ├──/utils — функции, созданные под проект, в том числе утилиты скелетона
|    ├── config.js — настройки проекта
|    ├── index.html — единственный шаблон с корневыми тегами документа 
|    ├── index.node.js — главный файл приложения для NodeJS при SSR
|    └── index.web.js — главный файл приложения для браузера
├── ...
├── package.json
├── server.js — сервер рендера и запуск node сборки
└── webpack.config.js — опции сброки и дев режима
```

Главный исполняемый файл фронтенд приложения -./src/index.web.js. Для исполнения на сервере используется другой файл - ./src/index.node.js. 
У них общая задача - импортировать базовые сервисы и запустить рендер react компонентов, но отличия в реализации из-за разного окружения.

## /app

Основа всего приложения. Иерархия компонент в соответствии с картой (роутингом) сайта. Каждый компонент в app - это страница или раздел сайта. Вложенность файловой структуры /app тоже соответствуют карте сайта.

По паттерну MVC компоненты app являются контроллерами - “умными” компонентами. Их задача контролировать основной поток данных, преимущественно инициализацию состояния и различные логические взаимосвязи. В app не допускается вёрстка (стилизация), вместо неё используется разметка на “глупых” компонентах из /components или из сторонней библиотеки, им передаются данные из app для отображения. Глупые компоненты реализуют слой отображения по паттерну MVC. 

Логику страницы можно декомпозировать на самостоятельные части. Тоже компоненты, но “умные”. Умные компоненты должны сами взять всё что нужно из окружения. Тем самым разгружается зависимость в компоненте страницы. 

## /containers

Самостоятельные части страниц, вынесенные в отдельные “умные” компоненты из app в целях повторного использования или снижения сложности кода в app. Без вёрстки, только логика как в app, но без роутинга (иначе нарушится принцип соответствия app карте сайта). Пример: боковая панель, повторно используемая на каждой странице сайта. По паттерну MVC компоненты-контейнеры тоже являются контроллерами. Можно также считать, что контейнеры представляющие страницу или раздел сайта вынесены в app.

Контейнеры дополняют функциональность приложения в app, но не определяют её основу. Например, получение начальных данных должно выполняться на уровне app, а в containers этими данными можно оперировать - брать и изменять. Из-за отсутствия какого-либо контейнера не должна нарушаться логика страницы или других контейнеров.

## /components

Библиотека компонент, в которых нет связи с окружением приложения. Это “глупые” компоненты, реализующие преимущественно отображение данных (вёрстку, разметку). Данные передаются компоненту через его свойства. Так как компонентов может быть очень много, их следует группировать по общему смыслу или назначению в поддиректории. Например: ./forms, ./layouts, ./menus.

## /store

Хранилище с общим состоянием приложения - данными. Состояние разделяется на модули (вложенные структуры данных). Для управления состоянием в каждом модуле имеются редьюсер (непосредственно устанавливает новое состояние модуля) и действия (реализующие некоторую логику и в последующем смену состояния). Действия можно вызывать как обычные функции из app, containers или других действий.

## /api

Функции запросов к апи. Определены отдельно, чтобы учитывать особенности запросов, не перенося их в другие слои приложения. Например, предопределенные http заголовки или тело запроса в нужном формате. Обычно используются в действиях хранилища.

## /utils

Библиотека вспомогательных функций. Могут группироваться в поддиректории. 

## /themes

Общие ресурсы для стилизации компонент. Шрифты, css, картинки..

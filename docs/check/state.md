# Состояние и экшены

1. Используется библиотека `redux`.
    - Без применения redux-thunk и прочих оберток
2. Состояние приложения декомпозируется на модули.
    - В модуле определяются экшены, начальное состояние и редьюсеры по установке состояния.
3. **Типы экшенов** и начальное состояние описывается в отдельном файле `{module}/state.js`.
4. **Экшены** - обычные функции, которые напрямую обращаются к объекту store, вызывая dispatch.
    - Вызов экшена - это обычный вызов функции, не надо оборачивать его в dispatch.
    - Объект store можно импортировать и напрямую работать с ним. 
    - Экшены описываются в виде объекта с методами в файле `{module}/actions.js`. Может применяться описание на класса, но экспортируется экземпляр класса.
    - Классы экшенов используются для наследования типовых экшенов.
    - Файл экшенов напрямую импортируется в контейнерах для вызовов.
5. **Редьюсеры** описываются в файле `{module}/reducer.js`
    - Описываются через функцию-обертку, которой передаётся начальное состояние, типы экшенов и объект с кастомными редьюмерами. 
    - Обычно логика всех редьюсеров проста и идентична -  присвоить новый объект состояния. 
    - Используется библиотека `merge-change` для слияния состояния.
    - Файл редьюсера нужно реэкспортировать в `@store/reducers.js`
6. Модуль состояния разрабатывается по принципу “источник данных”.
    - В состоянии сами данные, параметры по которым они получены и метаданные про ошибки, ожидание и прочее.
    - Чтобы модуль загрузил/обновил данные по апи, выполняется установка параметров. Смена параметров приводит к актуализации данных в соответствии с новыми параметрами. 
    - Параметры могут быть запомнены и впоследствии восстановлены из `localStorage` (например токен юзера) или `location.search` (параметры фильтра).
    - Практически все действия пользователя - это смена параметров. Смена поискового поля - установка параметра, контейнеру с полем поиска при этом не надо вызывать загрузку данные, его задачу установить параметр.
    - Инициализация модуля - это загрузка данных по начальным параметрам. Именно это делается в хуке `useInit()`. При инициализации можно передать новые параметры.

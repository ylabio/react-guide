# Контейнеры

1. Контейнеры - это **умные** [компоненты]() или контроллеры. 

2. Контейнер знает всё об окружении, сам берёт данные и вызывает действия, направляет данные компонентами и обрабатывает их события.

3. В контейнере не допускается вёрстка на html и css. Вместо неё используются компоненты.

4. Создаются в директориях `/containers` и `/app`. 
    - `/app` — контейнеры цельных страниц или разделов.
    - `/containers` — повторно используемые фрагменты страниц или вынесенная из страниц сложная логика.

5. Именование, функциональный стиль, мемомизация — всё как у [компонента]().

6. Контейнерам через `props` не передаются данные, только параметры, от которых зависит логика контейнера. 
   Например, идентификатор, по которому из стейта будут выбраны все свойства конкретного объекта.

7. Логика инициализации реализуется хуком `useInit()`. По умолчанию, этот хук вызывается единственный раз при первом 
   отображении контейнера, если не указана зависимость на параметры. Позволяет вызывать асинхронные действия и учитывает
   их при [серверном рендере](). Может отслеживать переходы назад/вперед по истории браузера, чтобы заново вызваться.
   ```js
   import useInit from '@utils/hooks/use-init';
   //..
   useInit(async () => {
      // загружаем товары при первом рендере контейнера или когда меняется categoryId
      await articles.init({ categoryId });
   }, [categoryId]);
   
   useInit(async () => {
     // Загружаем категории только при первом рендере контейнера
     await categories.load({ limit: 1000 });
   });
   ```

8. Нужно избегать каскадов инициализации, когда вложенный контейнер рендерится после инициализации родительского контейнера, и после 
  запускает свою инициализацию. Все инициализации должны происходить в контейнере-странице в `/app`. Контейнеры в
  `/containers` должны сразу выбирать данные из стейта, реагировать на его изменение.

9. В `/app` не должно быть контейнеров без привязки к роуту. Структура директорий в `/app` соответствует карте сайта

10. В `/containers` используются поддиректории для группировки контейнеров по общим признакам. Чтобы легче ориентироваться.
